* 登录ECS: ssh root@123.57.50.82,  后改为ssh密钥登录，不允许密码登录.

* useradd -m leslie -s /bin/bash : 创建leslie用户, 并指定login shell, 不指定的话, ssh 登录后不会执行/home/leslie/.profile
  passwd leslie:   147258
  usermod -a -G sudo leslie:  追加入sudo组, 这样可以使用sudo了.  /etc/sudoers 里面有%sudo   ALL=(ALL:ALL) ALL
  groups leslie: 查看所属组.

* 服务器安全配置.
  sudo netstat -tulpn:  查看tcp udp 开放的端口及进程.
  sudo netstat --status-all: 查看所有服务.

* ssh 密钥认证.
  ssh-keygen -t rsa:  本地机器上生成公钥、私钥.(默认保存在~/.ssh/id_rsa, ~/.ssh/id_rsa.pub)
  将公钥id_rsa.pub 内容copy至服务器的.ssh/authorized_keys文件中, 即可不用通过密码登录.
  chmod 600 authorized_keys:
  chmod 700 .ssh:   设置权限.
  /etc/ssh/sshd_config: 禁止密码登录， 关闭root直接登录(前提时必须已经有sudo用户了.), 修改默认端口(22 -> 23768)
  ChallengeResponseAuthentication no
  PasswordAuthentication no
  UsePAM no
  PermitRootLogin no
  sudo service ssh restart: 重启ssh service.
  本地秘钥保存在: 百度网盘, 恢复时， chmod 600 id_rsa 即可使用.

  ssh root@123.57.50.82: 默认端口22登录报错:
  ssh: connect to host 123.57.50.82 port 22: Connection refused

  ssh -p 23768 root@123.57.50.82
  ssh -p 23768 aaa@123.57.50.82: 禁止的用户登录报错:
  Permission denied (publickey).

  ssh -p 23768 leslie@123.57.50.82: 正常登录. p小写.
  scp -P 23768 170109.tar.gz  leslie@123.57.50.82:/home/leslie: 正常scp. P大写.

* 安装jdk
  /opt/Software/ProgrammingSoftware/JDK/Oracle_jdk/jdk-7u45-linux-x64.tar.gz
  tar -zxv -f jdk-7u45-linux-x64.tar.gz -C /opt/jdk/oracle/:  解压即可. 设置PATH

* 安装nodejs
  sudo chown -R leslie:leslie opt: 修改/opt属性，便于安装文件.
  scp node-v7.3.0-linux-x64.tar.xz leslie@123.57.50.82:/home/leslie  :copy 安装包.
  xz -d node-v7.3.0-linux-x64.tar.xz
  tar -xv -f node-v7.3.0-linux-x64.tar
  设置.bashrc的 PATH.

  ECS上连接外网速度很慢，上传本地全局安装的bower, grunt等工具:
  tar -zcv -f lib.tar.gz lib;  打包本地并上传，解压到NODE_HOME. 注意别覆盖已安装的lib/node_modules/npm
  ln -s ../lib/node_modules/bower/bin/bower bower: 设置链接.

* 安装tomcat
  /opt/Software/ProgrammingSoftware/Apache/Tomcat/apache-tomcat-7.0.26.zip: 和本地一致.
  解压即可.

* 上传代码.
  tar -zcv -f angular-basic.tar.gz angular-basic:  打包压缩本地代码.
  scp angular-basic.tar.gz leslie@123.57.50.82:/home/leslie: 上传解压.

* 安装solr
  参考: /home/leslie/Work/Leslie/Solr/Solr.md

* 安装mysql
  参考: /home/leslie/Work/Leslie/Mysql/Mysql.md

* 安装mongodb
  ECS上无法使用mongo官方提供的添加源, 然后apt-get的安装方法. 
  在本地用apt下载安装包:
   mongodb-org - MongoDB open source document-oriented database system (metapackage)
   mongodb-org-mongos - MongoDB sharded cluster query router
   mongodb-org-server - MongoDB database server
   mongodb-org-shell - MongoDB shell client
   mongodb-org-tools - MongoDB tools
  sudo apt download mongodb-org: 一共5个. mongodb-org 依赖于其他4个. 
  正确安装顺序中的一种:
  sudo dpkg -i mongodb-org-mongos_3.2.11_amd64.deb
  sudo dpkg -i mongodb-org-server_3.2.11_amd64.deb
  sudo dpkg -i mongodb-org-shell_3.2.11_amd64.deb
  sudo dpkg -i mongodb-org-tools_3.2.11_amd64.deb
  sudo dpkg -i mongodb-org_3.2.11_amd64.deb
  sudo service mongod start: 启动即可.

* mongodb 数据迁移.
  mongodump --host 127.0.0.1:27017 -o /home/leslie/MyProject/Python/Backup/170109: dump 数据.
  scp -P 23768 170109.tar.gz  leslie@123.57.50.82:/home/leslie: 上传数据.
  mongorestore --host 127.0.0.1:27017 /home/leslie/MyProject/data/mongodb/170109: resotre数据.

* 安装shiny-server
  参考: /home/leslie/Work/Leslie/R/R.md
   index.html -> /opt/shiny-server/samples/welcome.html
   sample-apps -> /opt/shiny-server/samples/sample-apps/

* 域名解析



* TIPS
- * 由于本地ssh到ECS过段时间就会自动断开，所以启动网站时不可以直接 npm start, 断开后就停止了.  使用nohup 

